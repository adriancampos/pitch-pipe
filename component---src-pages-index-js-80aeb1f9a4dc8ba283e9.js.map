{"version":3,"sources":["webpack:///./src/components/board-square.module.css","webpack:///./src/components/synth.js","webpack:///./src/components/tonebutton.module.css","webpack:///./src/components/tonebutton.js","webpack:///./src/components/board-square.js","webpack:///./src/pages/index.js","webpack:///./src/components/board.js"],"names":["module","exports","Synth","props","waveType","playingTones","componentDidMount","console","log","initAudioCtx","this","audioCtx","window","AudioContext","gainNode","createGain","connect","destination","playTone","pitch","Error","oscillator","createOscillator","type","frequency","value","gain","length","start","currentTime","push","stopTone","forEach","tone","stop","filter","stopAll","render","React","Component","ToneBtn","state","name","children","className","btnStyles","tonebutton","onTouchStart","e","onMouseDown","preventDefault","onPointerDown","onPointerUp","onMouseUp","onTouchEnd","onTouchCancel","style","BoardSquare","getToneButton","key","noteNumberToPitch","number","boardStyles","container","ref","synth","row","rowItem","spacer","Board","IndexPage","title","createRef","current","notes","tonebtns","Object","keys","map","index","onClick"],"mappings":"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","file":"component---src-pages-index-js-80aeb1f9a4dc8ba283e9.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"board-square-module--container--2wIhW\",\"row\":\"board-square-module--row--JptEP\",\"rowItem\":\"board-square-module--row-item--puPBz\",\"spacer\":\"board-square-module--spacer--2em31\"};","import React from \"react\"\n\nclass Synth extends React.Component {\n  constructor(props) {\n    super(props);\n    this.waveType = (props && props.waveType) || \"sine\";\n    this.playingTones = [];\n  }\n\n  componentDidMount() {\n    console.log(\"Synth mounted.\");\n  }\n\n  initAudioCtx() {\n    if (!this.audioCtx) {\n      this.audioCtx = new window.AudioContext();\n      this.gainNode = this.audioCtx.createGain();    \n      this.gainNode.connect(this.audioCtx.destination);\n      console.log(\"Synth initialized.\")\n    }\n  }\n\n  playTone(pitch) {\n    if (!this.audioCtx) {\n      throw new Error(\"Must call initAudioCtx before calling playTone.\")\n    }\n\n    var oscillator = this.audioCtx.createOscillator();\n\n    oscillator.type = this.waveType; // TODO: get waveType working\n    oscillator.frequency.value = pitch;\n\n    // Ensure that the amplitudes never add above 1 by setting the gain of each to 1/(number of oscillators)\n    this.gainNode.gain.value = 1 / (this.playingTones.length + 1);\n    oscillator.connect(this.gainNode);\n\n    oscillator.start(this.audioCtx.currentTime);\n\n    this.playingTones.push({pitch : pitch, oscillator : oscillator});\n  }\n\n  stopTone(pitch) {\n    // Could use https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\n    // But it finds first (or any one) object. I might? want to stop all of a given pitch if there are multiple.\n    // But there shouldn't be multiple. I could enforce that by doing a pitch to oscilator map\n    this.playingTones.forEach((tone) => {\n      if (tone.pitch === pitch) {\n        tone.oscillator.stop(this.audioCtx.currentTime);\n      }\n    })\n\n    // Removed stopped tones from the array\n    this.playingTones = this.playingTones.filter(tone => tone.pitch !== pitch);\n  }\n\n  stopAll() {\n    this.playingTones.forEach((tone) => {\n      tone.oscillator.stop(this.audioCtx.currentTime);\n    });\n  }\n\n  render() {\n    return null;\n  }\n}\n\nexport default Synth\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tonebutton\":\"tonebutton-module--tonebutton--5z3SJ\"};","import React from \"react\"\nimport btnStyles from \"./tonebutton.module.css\"\n\n\nclass ToneBtn extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: props.children,\n      pitch: props.pitch,\n    };\n  }\n \n  render() {\n    return (\n      <button className={btnStyles.tonebutton}\n        onTouchStart={(e) => {\n          this.props.onMouseDown()\n          e.preventDefault()\n        }}\n        onPointerDown={(e) => {\n          this.props.onMouseDown()\n        }}\n        onPointerUp={()=>{\n          this.props.onMouseUp()}}\n        onTouchEnd={() => {\n          this.props.onMouseUp();\n        }}\n        onTouchCancel={() => {\n          this.props.onMouseUp();\n        }}       \n\n        style={{\"width\": \"100%\", \"height\":\"100%\",\"user-select\": \"none\",\"touch-action\":\"none\"}} // TODO: Export this to CSS\n        >\n        {this.state.name}\n      </button>\n    );\n  }\n}\n\nexport default ToneBtn\n","import React from \"react\"\nimport Board from \"./board\"\nimport ToneBtn from \"./tonebutton\"\nimport Synth from \"./synth\";\nimport boardStyles from \"./board-square.module.css\"\n\n\nclass BoardSquare extends Board {\n\n\n  getToneButton(name, pitch) {\n    return (\n      <ToneBtn\n        onMouseDown={() => this.playTone(pitch)}\n        onMouseUp={() => this.stopTone(pitch)}\n        pitch={pitch}\n        key={pitch}\n      >\n        {name}\n      </ToneBtn>\n    );\n  };\n\n\n  render() {\n   \n    function noteNumberToPitch(number) {\n      return 440 * 2 ** ((number - 69) / 12)\n    }\n\n    return (\n      <div className=\"board\" className={boardStyles.container}>\n        <Synth ref={this.synth} waveType={\"sine\"} />\n\n        <div className={boardStyles.row}>\n          <div className={boardStyles.rowItem}>{this.getToneButton(\"F\", noteNumberToPitch(65))}</div>\n          <div className={boardStyles.rowItem}>{this.getToneButton(\"♯/♭\", noteNumberToPitch(66))}</div>\n          <div className={boardStyles.rowItem}>{this.getToneButton(\"G\", noteNumberToPitch(67))}</div>\n          <div className={boardStyles.rowItem}>{this.getToneButton(\"♯/♭\", noteNumberToPitch(68))}</div>\n        </div>\n        <div className={boardStyles.row}>\n          <div className={boardStyles.rowItem}>{this.getToneButton(\"E\", noteNumberToPitch(76))}</div>\n          <div className={boardStyles.spacer}></div>\n          <div className={boardStyles.rowItem}>{this.getToneButton(\"A\", noteNumberToPitch(69))}</div>\n        </div>\n        <div className={boardStyles.row}>\n          <div className={boardStyles.rowItem}>{this.getToneButton(\"♯/♭\", noteNumberToPitch(75))}</div>\n          <div className={boardStyles.spacer}></div>\n          <div className={boardStyles.rowItem}>{this.getToneButton(\"♯/♭\", noteNumberToPitch(70))}</div>\n        </div>\n        <div className={boardStyles.row}>\n          <div className={boardStyles.rowItem}>{this.getToneButton(\"D\", noteNumberToPitch(74))}</div>\n          <div className={boardStyles.rowItem}>{this.getToneButton(\"♯/♭\", noteNumberToPitch(73))}</div>\n          <div className={boardStyles.rowItem}>{this.getToneButton(\"C\", noteNumberToPitch(72))}</div>\n          <div className={boardStyles.rowItem}>{this.getToneButton(\"B\", noteNumberToPitch(71))}</div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default BoardSquare\n","import React from \"react\"\n\nimport Layout from \"../components/layout\"\nimport SEO from \"../components/seo\"\nimport BoardSquare from \"../components/board-square\"\n\nconst IndexPage = () => (\n  <Layout>\n    <SEO title=\"Home\" />\n    <BoardSquare/>\n  </Layout>\n)\n\nexport default IndexPage\n","import { Link } from \"gatsby\"\nimport PropTypes from \"prop-types\"\nimport React from \"react\"\nimport ToneBtn from \"../components/tonebutton\"\nimport Synth from \"./synth\";\n\n\nclass Board extends React.Component {\n  constructor(props) {\n    super(props);\n    this.synth = React.createRef();\n  }\n\n\n  playTone(pitch) {\n    // this.synth.current.stopAll(); // Ensures that if a note gets \"stuck\" it's overridden by the next one\n    this.synth.current.initAudioCtx();\n    this.synth.current.playTone(pitch);\n  }\n\n  stopTone(pitch) {\n    this.synth.current.stopTone(pitch);\n  }\n\n  stopAll() {\n    this.synth.current.stopAll();\n  }\n\n  render() {\n    const notes = { \"C0\": 16.35, \"C#0/Db0 \": 17.32, \"D0\": 18.35, \"D#0/Eb0 \": 19.45, \"E0\": 20.60, \"F0\": 21.83, \"F#0/Gb0 \": 23.12, \"G0\": 24.50, \"G#0/Ab0 \": 25.96, \"A0\": 27.50, \"A#0/Bb0 \": 29.14, \"B0\": 30.87, \"C1\": 32.70, \"C#1/Db1 \": 34.65, \"D1\": 36.71, \"D#1/Eb1 \": 38.89, \"E1\": 41.20, \"F1\": 43.65, \"F#1/Gb1 \": 46.25, \"G1\": 49.00, \"G#1/Ab1 \": 51.91, \"A1\": 55.00, \"A#1/Bb1 \": 58.27, \"B1\": 61.74, \"C2\": 65.41, \"C#2/Db2 \": 69.30, \"D2\": 73.42, \"D#2/Eb2 \": 77.78, \"E2\": 82.41, \"F2\": 87.31, \"F#2/Gb2 \": 92.50, \"G2\": 98.00, \"G#2/Ab2 \": 103.83, \"A2\": 110.00, \"A#2/Bb2 \": 116.54, \"B2\": 123.47, \"C3\": 130.81, \"C#3/Db3 \": 138.59, \"D3\": 146.83, \"D#3/Eb3 \": 155.56, \"E3\": 164.81, \"F3\": 174.61, \"F#3/Gb3 \": 185.00, \"G3\": 196.00, \"G#3/Ab3 \": 207.65, \"A3\": 220.00, \"A#3/Bb3 \": 233.08, \"B3\": 246.94, \"C4\": 261.63, \"C#4/Db4 \": 277.18, \"D4\": 293.66, \"D#4/Eb4 \": 311.13, \"E4\": 329.63, \"F4\": 349.23, \"F#4/Gb4 \": 369.99, \"G4\": 392.00, \"G#4/Ab4 \": 415.30, \"A4\": 440.00, \"A#4/Bb4 \": 466.16, \"B4\": 493.88, \"C5\": 523.25, \"C#5/Db5 \": 554.37, \"D5\": 587.33, \"D#5/Eb5 \": 622.25, \"E5\": 659.25, \"F5\": 698.46, \"F#5/Gb5 \": 739.99, \"G5\": 783.99, \"G#5/Ab5 \": 830.61, \"A5\": 880.00, \"A#5/Bb5 \": 932.33, \"B5\": 987.77, \"C6\": 1046.50, \"C#6/Db6 \": 1108.73, \"D6\": 1174.66, \"D#6/Eb6 \": 1244.51, \"E6\": 1318.51, \"F6\": 1396.91, \"F#6/Gb6 \": 1479.98, \"G6\": 1567.98, \"G#6/Ab6 \": 1661.22, \"A6\": 1760.00, \"A#6/Bb6 \": 1864.66, \"B6\": 1975.53, \"C7\": 2093.00, \"C#7/Db7 \": 2217.46, \"D7\": 2349.32, \"D#7/Eb7 \": 2489.02, \"E7\": 2637.02, \"F7\": 2793.83, \"F#7/Gb7 \": 2959.96, \"G7\": 3135.96, \"G#7/Ab7 \": 3322.44, \"A7\": 3520.00, \"A#7/Bb7 \": 3729.31, \"B7\": 3951.07, \"C8\": 4186.01, \"C#8/Db8 \": 4434.92, \"D8\": 4698.63, \"D#8/Eb8 \": 4978.03, \"E8\": 5274.04, \"F8\": 5587.65, \"F#8/Gb8 \": 5919.91, \"G8\": 6271.93, \"G#8/Ab8 \": 6644.88, \"A8\": 7040.00, \"A#8/Bb8 \": 7458.62, \"B8\": 7902.13, };\n    // TODO: I should format like\n    // [{name: \"C0\", pitch: 16.35}, {name: \"C#0/Db0\" : 17.32}, ..., {name: \"B8\", pitch: 7902.13},]\n    // So that order is preserved and my code is more explicit\n\n    const tonebtns = Object.keys(notes).map((key, index) => {\n      return (\n        <ToneBtn\n          onMouseDown={() => this.playTone(notes[key])}\n          onMouseUp={() => this.stopTone(notes[key])}\n          pitch={notes[key]}\n          key={notes[key]}\n        >\n          {key}\n        </ToneBtn>\n      );\n    });\n\n    return (\n      <div className=\"board\">\n        <button onClick={() => this.stopAll()}>stop all</button>\n        <div><Synth ref={this.synth} waveType={\"sine\"}/></div>\n        <ol>{tonebtns}</ol>\n\n      </div>\n\n    );\n\n  }\n}\n\n\nexport default Board\n"],"sourceRoot":""}